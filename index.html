<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ø¯ÙŠ Ø§Ù„Ø³Ø±Ø¹Ø© ØªÙˆÙ†Ø³ ğŸ‡¹ğŸ‡³</title>
    <style>
        body { font-family: sans-serif; text-align: center; background: #fff; color: #E70013; margin: 0; padding: 20px; }
        .header { background: #E70013; color: white; padding: 15px; border-radius: 15px; }
        #click-btn { width: 150px; height: 150px; border-radius: 50%; border: 8px solid #E70013; background: white; font-size: 40px; cursor: pointer; margin-top: 20px; }
        #auth-box { background: white; padding: 20px; border: 2px solid #E70013; position: fixed; top: 15%; left: 5%; right: 5%; z-index: 1000; display: none; border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
    </style>
</head>
<body>

    <div id="auth-box">
        <h3>Ø³Ø¬Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ù„Ù…Ù†Ø§ÙØ³Ø© ğŸ†</h3>
        <input type="text" id="user-name" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" style="width: 85%; padding: 10px; margin: 10px 0;">
        <input type="email" id="user-email" placeholder="Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" style="width: 85%; padding: 10px; margin: 10px 0;">
        <button onclick="saveUser()" style="background: #E70013; color: white; padding: 10px; width: 90%; border: none; border-radius: 5px;">Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
    </div>

    <div class="header"><h2>ØªØ­Ø¯ÙŠ Ø§Ù„Ù€ 1,000,000 ğŸ‡¹ğŸ‡³</h2></div>
    <p>Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="total-points">0</span> | Ø§Ù„Ø¹Ù…Ù„Ø§Øª: <span id="coins">0</span></p>
    <p>ÙˆÙ‚Øª Ø§Ù„Ø¬ÙˆÙ„Ø©: <span id="timer">10</span> Ø«Ø§Ù†ÙŠØ©</p>
    <button id="click-btn" onclick="handleClick()">ğŸ–±ï¸</button>
    <p id="message">Ø§Ø¶ØºØ· Ù„Ù„Ø¨Ø¯Ø¡!</p>

    <script>
        const scriptURL = 'Ø¶Ø¹_Ø±Ø§Ø¨Ø·_Ø¬ÙˆØ¬Ù„_Ù‡Ù†Ø§_Ù‡Ù†Ø§'; // ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¶Ø¹ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ØµØ­ÙŠØ­ Ù‡Ù†Ø§
        let totalPoints = parseInt(localStorage.getItem('totalPoints')) || 0;
        let coins = parseInt(localStorage.getItem('coins')) || 0;
        let currentScore = 0, timeLeft = 10, gameActive = false, timerId;

        window.onload = function() {
            if (!localStorage.getItem('userEmail')) {
                document.getElementById('auth-box').style.display = 'block';
            }
            updateDisplay();
        }

        function saveUser() {
            let name = document.getElementById('user-name').value;
            let email = document.getElementById('user-email').value;
            if (name && email) {
                localStorage.setItem('userName', name);
                localStorage.setItem('userEmail', email);
                document.getElementById('auth-box').style.display = 'none';
            }
        }

        function handleClick() {
            if (!gameActive && timeLeft === 10) startGame();
            if (gameActive) { currentScore++; document.getElementById('message').innerText = "Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬ÙˆÙ„Ø©: " + currentScore; }
        }

        function startGame() {
            gameActive = true;
            timerId = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').innerText = timeLeft;
                if (timeLeft <= 0) endGame();
            }, 1000);
        }

        function endGame() {
            gameActive = false;
            clearInterval(timerId);
            totalPoints += currentScore;
            coins += Math.floor(currentScore / 150) * 10;
            localStorage.setItem('totalPoints', totalPoints);
            localStorage.setItem('coins', coins);
            updateDisplay();
            sendDataToAdmin(totalPoints, coins);
            alert("Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬ÙˆÙ„Ø©! ØªÙ… Ø­ÙØ¸ Ù†Ù‚Ø§Ø·Ùƒ.");
            location.reload(); // Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØµÙÙŠØ±
        }

        function updateDisplay() {
            document.getElementById('total-points').innerText = totalPoints;
            document.getElementById('coins').innerText = coins;
        }

        function sendDataToAdmin(p, c) {
            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                body: JSON.stringify({ name: localStorage.getItem('userName'), email: localStorage.getItem('userEmail'), points: p, coins: c })
            });
        }
    </script>
</body>
</html>
