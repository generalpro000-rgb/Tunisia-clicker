<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ø¯ÙŠ Ø§Ù„Ù…Ø²ÙˆØ¯ ÙˆØ§Ù„Ù…Ù„ÙŠÙˆÙ† Ù†Ù‚Ø·Ø© ğŸ‡¹ğŸ‡³</title>
    <style>
        :root { --tunisia-red: #E70013; --gold: #FFD700; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; background: #f9f9f9; color: #333; margin: 0; padding: 0; overflow-x: hidden; }
        .header { background: var(--tunisia-red); color: white; padding: 20px; border-bottom: 5px solid var(--gold); box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .stats-container { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; }
        .stat-card { background: white; border: 2px solid var(--tunisia-red); border-radius: 12px; padding: 10px; font-weight: bold; font-size: 14px; }
        .stat-card span { display: block; color: var(--tunisia-red); font-size: 18px; }
        #click-btn { width: 180px; height: 180px; border-radius: 50%; border: 10px solid var(--tunisia-red); background: white; font-size: 50px; cursor: pointer; transition: 0.1s; box-shadow: 0 10px 20px rgba(231,0,19,0.2); margin: 20px auto; display: block; outline: none; -webkit-tap-highlight-color: transparent; }
        #click-btn:active { transform: scale(0.9); box-shadow: 0 5px 10px rgba(0,0,0,0.2); }
        #auth-box { background: white; padding: 25px; border: 3px solid var(--tunisia-red); position: fixed; top: 15%; left: 5%; right: 5%; z-index: 2000; border-radius: 20px; box-shadow: 0 0 50px rgba(0,0,0,0.5); }
        input { width: 90%; padding: 12px; margin: 8px 0; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; }
        .btn-main { background: var(--tunisia-red); color: white; padding: 12px 25px; border: none; border-radius: 8px; font-size: 18px; cursor: pointer; width: 100%; margin-top: 10px; }
        #progress-container { width: 90%; background: #ddd; height: 20px; border-radius: 10px; margin: 15px auto; overflow: hidden; border: 1px solid #ccc; }
        #progress-bar { width: 0%; height: 100%; background: linear-gradient(90deg, #2ecc71, #27ae60); transition: 0.5s; }
    </style>
</head>
<body>

    <div id="auth-box">
        <h2 style="color: var(--tunisia-red);">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠ ğŸ‡¹ğŸ‡³</h2>
        <p>Ø³Ø¬Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ù„Ù…Ù†Ø§ÙØ³Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©</p>
        <input type="text" id="user-name" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
        <input type="email" id="user-email" placeholder="Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
        <button class="btn-main" onclick="saveUser()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯ÙŠ ÙˆØ§Ø´Ø¹Ù„ Ø§Ù„Ù…Ø²ÙˆØ¯! ğŸ”¥</button>
    </div>

    <div class="header">
        <h1>ØªØ­Ø¯ÙŠ Ø§Ù„Ù…Ù„ÙŠÙˆÙ† Ù†Ù‚Ø·Ø©</h1>
        <p>Ø¬ÙˆØ§Ø¦Ø² ÙƒÙ„ ÙŠÙˆÙ… Ø£Ø­Ø¯ Ù„Ù„Ù€ 10 Ø§Ù„Ø£ÙˆØ§Ø¦Ù„</p>
    </div>

    <div class="stats-container">
        <div class="stat-card">ğŸ’° Ø¹Ù…Ù„Ø§ØªÙƒ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©<span><span id="coins">0</span></span></div>
        <div class="stat-card">ğŸ¯ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‚Ø§Ø·<span><span id="total-points">0</span></span></div>
        <div class="stat-card">âŒ› Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ<span><span id="timer">10</span> Ø«Ø§Ù†ÙŠØ©</span></div>
        <div class="stat-card">ğŸš€ Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬ÙˆÙ„Ø©<span><span id="current-score">0</span></span></div>
    </div>

    <div id="progress-container"><div id="progress-bar"></div></div>
    <small>Ø§Ù„ØªÙ‚Ø¯Ù… Ù†Ø­Ùˆ Ø§Ù„Ù…Ù„ÙŠÙˆÙ†: <span id="progress-text">0</span>%</small>

    <button id="click-btn" onclick="handleClick()">ğŸ–±ï¸</button>
    <p id="message" style="font-weight: bold; font-size: 18px;">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„Ù„Ø¨Ø¯Ø¡!</p>

    <audio id="mzoued-sound" preload="auto">
        <source src="https://www.soundjay.com/free-music/fast-drumming-01.mp3" type="audio/mpeg">
    </audio>

    <script>
        // --- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ---
        const scriptURL = 'Ø¶Ø¹_Ø±Ø§Ø¨Ø·_Ø¬ÙˆØ¬Ù„_Ù‡Ù†Ø§_Ù‡Ù†Ø§'; // Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ù€ Web App Ù…Ù† Google Script Ù‡Ù†Ø§
        let totalPoints = parseInt(localStorage.getItem('totalPoints')) || 0;
        let coins = parseInt(localStorage.getItem('coins')) || 0;
        let currentScore = 0, timeLeft = 10, gameActive = false, timerId;

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ---
        window.onload = function() {
            if (!localStorage.getItem('userEmail')) {
                document.getElementById('auth-box').style.display = 'block';
            }
            updateDisplay();
        }

        function saveUser() {
            let name = document.getElementById('user-name').value;
            let email = document.getElementById('user-email').value;
            if (name && email) {
                localStorage.setItem('userName', name);
                localStorage.setItem('userEmail', email);
                document.getElementById('auth-box').style.display = 'none';
            } else { alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ¹Ù…ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙŠØ§ Ø¨Ø·Ù„!"); }
        }

        function handleClick() {
            if (!gameActive && timeLeft
